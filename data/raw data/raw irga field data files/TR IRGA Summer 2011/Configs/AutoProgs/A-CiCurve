/*	A-Ci Curve	rev 2 3/16/95		960822 - Tech Note 14 modification	970502 - remembers last time defaults	980309 - delta-based matching	020524 - version 5 stability*/ :CHAR defaultFile[] "A-CiCurve Dflts":FLOAT	co2Vals[20] {400 300 200 100 50 400 400 600}		matchIf 20		:INT 	minWaitTime 60		maxWaitTime 300		pmWait 10		:PTR user[] {	:PTR { co2Vals "\nDesired Ca values (æmol/mol)\n" }	:PTR { minWaitTime "Minimum wait time (secs) " }	:PTR { maxWaitTime "Maximum wait time (secs) " }	:PTR { matchIf "Match if |\x7FCO2| less than (ppm) " }}:FCT main{	0 :FLOAT waitTime	LPIsTargetB :INT target	/* Get rid of the non-serious....	*/	mixerAvail NOT IF		1 "Sorry.  Need a CO2 Mixer for this." MESSBOX DROP		RETURN	THEN	IsCO2MixerOn NOT IF		1 "Turn on the CO2 Mixer and get itstabilized before running this." MESSBOX DROP RETURN	THEN		"A-Ci Curve" DUP LPSetName	"\f%s\n" PRINT			MixerGetTarget SWAP DROP :INT theTarget		defaultFile user LPPrompts2 IF RETURN THEN	LPDefineStability IF RETURN THEN		1 :INT i	LPPrep	target LPMixerTarget	co2Vals READY LPRegLoop NLOOP LPLoopStat				co2Vals i PICK VAL DUP IF			theTarget 		ELSE			0 1 		THEN		MixerSetNewTarget				minWaitTime maxWaitTime LPMeasureTilStable			lpAbort BREAKIF					MatchFct			LPLog		&i 1 + DROP 	ENDLOOP LPDeregLoop	LPCleanup}MatchFct{	co2_diff_um ABS matchIf < IF		LPMatch		10 LPMeasure	THEN}