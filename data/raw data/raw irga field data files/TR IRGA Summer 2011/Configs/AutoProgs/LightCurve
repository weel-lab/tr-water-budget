/*	Simple Light Curve, with stability checking	960822 - Tech Note 14 modification, wait time defaults	970502 - remembers last time defaults	980309 - delta-based matching	020524 - version 5 stability*/:CHAR defaultFile[] "LightCurve Dflts":FLOAT	lampVals[20] { 2000 1500 1000 500 200 100 50 20 0 }		matchIf 20		:INT 	minWaitTime 120		maxWaitTime 200		pmWait 10				:PTR user[] {			:PTR { lampVals "Desired lamp settings (æmol/m2/s)\n"}			:PTR { minWaitTime "Minimum wait time (secs) "}			:PTR { maxWaitTime "Maximum wait time (secs) "}			:PTR { matchIf "Match if |\x7FCO2| less than (ppm) " }			}:FCT main{	/*	Set program name	*/	"Light Curve" DUP LPSetName	"\f%s\n" PRINT		defaultFile user LPPrompts2 IF RETURN THEN	LPDefineStability IF RETURN THEN		LPPrep	/* Must be done */		/* Loop over the lamp values	*/	1 :INT i	lampVals READY LPRegLoop NLOOP LPLoopStat				lampVals i PICK VAL LPSetLamp	/* set lamp */				minWaitTime maxWaitTime LPMeasureTilStable			lpAbort BREAKIF		MatchFct		LPLog				/* log the data */		&i 1 + DROP 		/* increment */	ENDLOOP LPDeregLoop		LPCleanup /* must be done */}MatchFct{	co2_diff_um ABS matchIf < IF		LPMatch		10 LPMeasure	THEN}